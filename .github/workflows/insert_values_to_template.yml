on:
  workflow_dispatch:
    inputs:
      project_prefix_variable:
        description: 'Variable name to point to your project path'
        default: 'MY_PROTEIN_PREFIX'
        required: true
      project_name:
        description: 'System name'
        required: true

jobs:
  insert-values:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Insert values
        run: |
          grep -rl 'TEMPLATE_PROJECT_PREFIX' * | xargs sed -i 's!TEMPLATE_PROJECT_PREFIX!${{ github.event.inputs.project_prefix }}!g'
          grep -rl 'TEMPLATE_SYSTEM_NAME' * | xargs sed -i -e 's!TEMPLATE_SYSTEM_NAME!${{ github.event.inputs.system_name }}!g'
          rm .github/workflows/insert_values_to_template.yml
      - name: Create commit
        run: |
          git config --global user.name "${GITHUB_ACTOR}"
          git config --global user.email "${GITHUB_ACTOR}@users.noreply.github.com"
      - name: Create pull requests
        uses: peter-evans/create-pull-request@v4
