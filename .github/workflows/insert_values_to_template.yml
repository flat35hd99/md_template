on:
  workflow_dispatch:
    inputs:
      project_prefix:
        description: 'Path to project'
        required: true
      project_name:
        description: 'System name'
        required: true
      your_name:
        description: 'Use your name to commit'
        required: true
      your_email:
        description: 'Use your email address to commit'
        required: true
      

jobs:
  insert-values:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Insert values
        run: |
          grep -rl 'TEMPLATE_PROJECT_PREFIX' * | xargs sed -i.bak -e 's/TEMPLATE_PROJECT_PREFIX/${{ github.inputs.project_prefix }}/g'
          grep -rl 'TEMPLATE_SYSTEM_NAME' * | xargs sed -i.bak -e 's/TEMPLATE_SYSTEM_NAME/${{ github.inputs.system_name }}/g'
      - name: Commit
        run: |
          git config --local user.name ${{ github.inputs.your_name }}
          git config --local user.email ${{ github.inputs.your_email }}
          git add .
          git commit -m "Fill values in template"
          git push origin main